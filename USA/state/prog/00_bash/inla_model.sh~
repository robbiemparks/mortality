#!/bin/bash

# this script
# runs the INLA age-separated model
# binds the posterior results together
# plots the parameters of the model run

clear

#declare -a ages=(0 5 15 25 35 45 55 65 75 85)
declare -i model=2
declare -i start=1982
declare -i end=2013
declare country="USA"

#################################################
# 1. RUN AGE-SEPARATED MODEL
#################################################

# MALE

#for age in "${ages[@]}"; do

#echo "starting male $age INLA model $model years $start - $end";

# runs model for males
#Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R $age 1 $start $end $model 0
Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R 75 1 $start $end $model 0
Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R 35 1 $start $end $model 0

#echo "starting female $age INLA model $model years $start - $end";

# runs model for females
#Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R $age 2 $start $end $model 0
Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R 85 2 $start $end $model 0
Rscript ~/git/mortality/USA/state/prog/models/INLA/spatiotemporal/spatio_temporal_types_function.R 75 2 $start $end $model 0

#done;

#################################################
# 2. COMBINE RESULTS
#################################################

echo "combining results into one file from INLA model $model years $start - $end";

Rscript ~/git/mortality/USA/state/prog/bind_posterior/bind_posterior.R $start $end $country 2

#################################################
# 3. PLOTTING PARAMETERS FROM MODEL
#################################################

echo "plotting parameters from INLA model $model years $start - $end";

# PLOT PARAMETERS CODE
